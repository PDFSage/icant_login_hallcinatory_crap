{"ast":null,"code":"/* frontend/src/components/Dashboard.js */import React,{useEffect,useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Dashboard(){const navigate=useNavigate();const[docs,setDocs]=useState([]);const[file,setFile]=useState(null);const[isAdmin,setIsAdmin]=useState(false);const[risk,setRisk]=useState({});const[credentials,setCredentials]=useState([]);const[credType,setCredType]=useState('');const[credValue,setCredValue]=useState('');const handleLogout=async()=>{await axios.post('/api/logout',{},{withCredentials:true,headers:{'Cache-Control':'no-cache'}});navigate('/login');};const getDocs=async()=>{const res=await axios.get('/api/docs',{withCredentials:true,headers:{'Cache-Control':'no-cache'}});setDocs(res.data.docs);};const uploadFile=async e=>{e.preventDefault();if(!file)return;const formData=new FormData();formData.append('file',file);await axios.post('/api/upload',formData,{withCredentials:true,headers:{'Cache-Control':'no-cache'}});getDocs();};const getLeakRisk=async()=>{const res=await axios.get('/api/leak_risk',{withCredentials:true,headers:{'Cache-Control':'no-cache'}});setRisk(res.data.risk||{});};const checkAdmin=async()=>{try{const r=await axios.get('/api/leak_risk',{withCredentials:true,headers:{'Cache-Control':'no-cache'}});if(r.data&&r.data.risk){setIsAdmin(true);setRisk(r.data.risk);}}catch{setIsAdmin(false);}};const getCredentialsList=async()=>{const r=await axios.get('/api/get_credentials',{withCredentials:true,headers:{'Cache-Control':'no-cache'}});setCredentials(r.data.credentials||[]);};const addCredential=async e=>{e.preventDefault();await axios.post('/api/add_credential',{type:credType,value:credValue},{withCredentials:true,headers:{'Cache-Control':'no-cache'}});setCredType('');setCredValue('');getCredentialsList();};useEffect(()=>{;(async()=>{await axios.get('/api/graph',{withCredentials:true,headers:{'Cache-Control':'no-cache'}});})();getDocs();checkAdmin();getCredentialsList();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Federal Top Secret Dashboard\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/graph'),children:\"View Global Graph\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"Logout\"}),isAdmin&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h2\",{children:\"Leak Risk Prediction\"}),/*#__PURE__*/_jsx(\"button\",{onClick:getLeakRisk,children:\"Refresh Risk\"}),/*#__PURE__*/_jsx(\"ul\",{children:Object.keys(risk).map(u=>/*#__PURE__*/_jsxs(\"li\",{children:[u,\": \",risk[u].toFixed(3)]},u))})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:uploadFile,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Upload Document\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:e=>setFile(e.target.files[0])}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Upload\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"docs-list\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Documents\"}),docs.map(d=>/*#__PURE__*/_jsxs(\"div\",{children:[d.filename,\" (uploader: \",d.uploader,\")\"]},d.id))]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Credentials Manager\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:addCredential,children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Type\",value:credType,onChange:e=>setCredType(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Value\",value:credValue,onChange:e=>setCredValue(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"credentials-list\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Your Credentials\"}),credentials.map(c=>/*#__PURE__*/_jsxs(\"div\",{children:[c.type,\": \",c.value]},c.id))]})]})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dashboard","navigate","docs","setDocs","file","setFile","isAdmin","setIsAdmin","risk","setRisk","credentials","setCredentials","credType","setCredType","credValue","setCredValue","handleLogout","post","withCredentials","headers","getDocs","res","get","data","uploadFile","e","preventDefault","formData","FormData","append","getLeakRisk","checkAdmin","r","getCredentialsList","addCredential","type","value","className","children","onClick","Object","keys","map","u","toFixed","onSubmit","onChange","target","files","d","filename","uploader","id","placeholder","c"],"sources":["C:/Github/d3flask_tf_skl_opencv_tesseract_react_router_sample_maybe_cupy/frontend/src/components/Dashboard.js"],"sourcesContent":["/* frontend/src/components/Dashboard.js */\r\nimport React, { useEffect, useState } from 'react'\r\nimport axios from 'axios'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nexport default function Dashboard() {\r\n  const navigate = useNavigate()\r\n  const [docs, setDocs] = useState([])\r\n  const [file, setFile] = useState(null)\r\n  const [isAdmin, setIsAdmin] = useState(false)\r\n  const [risk, setRisk] = useState({})\r\n  const [credentials, setCredentials] = useState([])\r\n  const [credType, setCredType] = useState('')\r\n  const [credValue, setCredValue] = useState('')\r\n  const handleLogout = async () => {\r\n    await axios.post('/api/logout', {}, { withCredentials: true, headers: { 'Cache-Control': 'no-cache' } })\r\n    navigate('/login')\r\n  }\r\n  const getDocs = async () => {\r\n    const res = await axios.get('/api/docs', { withCredentials: true, headers: { 'Cache-Control': 'no-cache' } })\r\n    setDocs(res.data.docs)\r\n  }\r\n  const uploadFile = async e => {\r\n    e.preventDefault()\r\n    if (!file) return\r\n    const formData = new FormData()\r\n    formData.append('file', file)\r\n    await axios.post('/api/upload', formData, { withCredentials: true, headers: { 'Cache-Control': 'no-cache' } })\r\n    getDocs()\r\n  }\r\n  const getLeakRisk = async () => {\r\n    const res = await axios.get('/api/leak_risk', { withCredentials: true, headers: { 'Cache-Control': 'no-cache' } })\r\n    setRisk(res.data.risk || {})\r\n  }\r\n  const checkAdmin = async () => {\r\n    try {\r\n      const r = await axios.get('/api/leak_risk', { withCredentials: true, headers: { 'Cache-Control': 'no-cache' } })\r\n      if (r.data && r.data.risk) {\r\n        setIsAdmin(true)\r\n        setRisk(r.data.risk)\r\n      }\r\n    } catch {\r\n      setIsAdmin(false)\r\n    }\r\n  }\r\n  const getCredentialsList = async () => {\r\n    const r = await axios.get('/api/get_credentials', { withCredentials: true, headers: { 'Cache-Control': 'no-cache' } })\r\n    setCredentials(r.data.credentials || [])\r\n  }\r\n  const addCredential = async e => {\r\n    e.preventDefault()\r\n    await axios.post('/api/add_credential', { type: credType, value: credValue }, { withCredentials: true, headers: { 'Cache-Control': 'no-cache' } })\r\n    setCredType('')\r\n    setCredValue('')\r\n    getCredentialsList()\r\n  }\r\n  useEffect(() => {\r\n    ;(async () => {\r\n      await axios.get('/api/graph', { withCredentials: true, headers: { 'Cache-Control': 'no-cache' } })\r\n    })()\r\n    getDocs()\r\n    checkAdmin()\r\n    getCredentialsList()\r\n  }, [])\r\n  return (\r\n    <div className=\"dashboard-container\">\r\n      <h1>Federal Top Secret Dashboard</h1>\r\n      <button onClick={() => navigate('/graph')}>View Global Graph</button>\r\n      <button onClick={handleLogout}>Logout</button>\r\n      {isAdmin && (\r\n        <>\r\n          <hr/>\r\n          <h2>Leak Risk Prediction</h2>\r\n          <button onClick={getLeakRisk}>Refresh Risk</button>\r\n          <ul>\r\n            {Object.keys(risk).map(u => (\r\n              <li key={u}>{u}: {risk[u].toFixed(3)}</li>\r\n            ))}\r\n          </ul>\r\n        </>\r\n      )}\r\n      <hr/>\r\n      <form onSubmit={uploadFile}>\r\n        <h2>Upload Document</h2>\r\n        <input type=\"file\" onChange={e => setFile(e.target.files[0])} />\r\n        <button type=\"submit\">Upload</button>\r\n      </form>\r\n      <div className=\"docs-list\">\r\n        <h2>Documents</h2>\r\n        {docs.map(d => <div key={d.id}>{d.filename} (uploader: {d.uploader})</div>)}\r\n      </div>\r\n      <hr/>\r\n      <div>\r\n        <h2>Credentials Manager</h2>\r\n        <form onSubmit={addCredential}>\r\n          <input placeholder=\"Type\" value={credType} onChange={e => setCredType(e.target.value)} />\r\n          <input placeholder=\"Value\" value={credValue} onChange={e => setCredValue(e.target.value)} />\r\n          <button type=\"submit\">Add</button>\r\n        </form>\r\n        <div className=\"credentials-list\">\r\n          <h3>Your Credentials</h3>\r\n          {credentials.map(c => (\r\n            <div key={c.id}>\r\n              {c.type}: {c.value}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}